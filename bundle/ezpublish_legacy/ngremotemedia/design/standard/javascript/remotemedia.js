(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],u=0,p=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={app:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"1be4":function(e,t,a){},"1f12":function(e,t,a){"use strict";var n=a("20b0"),i=a.n(n);i.a},"20b0":function(e,t,a){},"3fb5":function(e,t,a){},"48a2":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("8e6e"),a("456d");var n=a("bd86"),i=(a("ac6a"),a("cadf"),a("551c"),a("f751"),a("097d"),a("a026")),r=(a("3fb5"),a("6107"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ngremotemedia-image"},[a("div",{staticClass:"image-wrap"},["image"===e.selectedImage.type?a("img",{ref:"image",attrs:{src:e.selectedImage.url}}):a("i",{staticClass:"ng-icon big",class:e.nonImagePreviewClass})]),a("div",{staticClass:"image-meta"},[a("h3",{staticClass:"title"},[e._v(e._s(e.selectedImage.name))]),a("div",{staticClass:"image-meta-data"},[a("div",{staticClass:"ngremotemedia-alttext"},[a("span",{staticClass:"help-block description"},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.preview_alternate_text))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedImage.alternateText,expression:"selectedImage.alternateText"}],staticClass:"media-alttext data",attrs:{type:"text",name:e.base+"_alttext_"+e.fieldId},domProps:{value:e.altText,value:e.selectedImage.alternateText},on:{input:function(t){t.target.composing||e.$set(e.selectedImage,"alternateText",t.target.value)}}})]),a("v-select",{attrs:{options:e.allTags,multiple:"",taggable:""},on:{input:e.handleTagsInput},model:{value:e.selectedImage.tags,callback:function(t){e.$set(e.selectedImage,"tags",t)},expression:"selectedImage.tags"}}),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedImage.tags,expression:"selectedImage.tags"}],staticClass:"ngremotemedia-newtags",attrs:{hidden:"",name:e.base+"_tags_"+e.fieldId+"[]",multiple:"multiple"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.selectedImage,"tags",t.target.multiple?a:a[0])}}},e._l(e.allTags,(function(t){return a("option",[e._v(e._s(t))])})),0)],1),a("p",[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.preview_size)+": "+e._s(e.formattedSize))])])])}),s=[],o=(a("5df3"),a("4f7f"),a("75fc")),l=(a("28a5"),a("01c8")),c=function(e){var t=[];for(var a in e)t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")},d=function(e){return e[0].toUpperCase()+e.slice(1)},u=function(e){var t=e.split("-"),a=Object(l["a"])(t),n=a[0],i=a.slice(1);return[n].concat(Object(o["a"])(i.map(d))).join("")},p=function(e,t){var a=Math.pow(10,t);return parseFloat(Math.round(e*a)/a).toFixed(t)},h={B:"KB",KB:"MB",MB:"GB",GB:"TB"},m=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"B",n=h[a];return!n||t<1024?"".concat(p(t,2)," ").concat(a):e(t/1024,n)},f=a("4a7a"),g=a.n(f),v={name:"Preview",props:["fieldId","base","selectedImage","altText"],data:function(){},components:{"v-select":g.a},computed:{nonImagePreviewClass:function(){return"video"===this.selectedImage.type?"ng-video":"ng-book"},formattedSize:function(){return m(this.selectedImage.size)}},methods:{handleTagsInput:function(e){this.allTags=Object(o["a"])(new Set([].concat(Object(o["a"])(this.allTags),Object(o["a"])(e))))}},mounted:function(){this.allTags=Object(o["a"])(this.selectedImage.tags)}},b=v,y=a("2877"),_=Object(y["a"])(b,r,s,!1,null,null,null),C=_.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("preview",{ref:"preview",attrs:{"field-id":e.fieldId,base:e.base,"selected-image":e.selectedImage,"alt-text":e.alt_text}}),a("div",{staticClass:"ngremotemedia-buttons",attrs:{id:"ngremotemedia-buttons-"+e.fieldId,"data-id":e.fieldId,"data-contentobject-id":e.contentObjectId,"data-version":e.version}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedImage.id,expression:"selectedImage.id"}],staticClass:"media-id",attrs:{type:"hidden",name:e.base+"_media_id_"+e.fieldId},domProps:{value:e.selectedImage.id},on:{input:function(t){t.target.composing||e.$set(e.selectedImage,"id",t.target.value)}}}),e.isCroppable?a("input",{staticClass:"ngremotemedia-scale hid button",attrs:{type:"button",value:this.$root.$data.NgRemoteMediaTranslations.interactions_scale},on:{click:e.handleCropClicked}}):e._e(),e.selectedImage.id?a("input",{staticClass:"ngremotemedia-remove-file button",attrs:{type:"button",value:this.$root.$data.NgRemoteMediaTranslations.interactions_remove_media},on:{click:e.handleRemoveMediaClicked}}):e._e(),a("input",{staticClass:"ngremotemedia-remote-file button",attrs:{type:"button",value:this.$root.$data.NgRemoteMediaTranslations.interactions_manage_media},on:{click:e.handleBrowseMediaClicked}}),a("div",{staticClass:"ngremotemedia-local-file-container"},[a("button",{staticClass:"btn btn-default ngremotemedia-local-file button upload-from-disk",attrs:{type:"button"}},[a("Label",{attrs:{for:"new_file"}},[e._v("\n          "+e._s(this.$root.$data.NgRemoteMediaTranslations.interactions_quick_upload)+"\n        ")]),a("input",{ref:"fileInput",attrs:{hidden:"",id:"new_file",name:e.base+"_new_file_"+e.fieldId,type:"file"},on:{change:e.handleFileInputChange}})],1)])])],1)},$=[],O=(a("7f7f"),a("96cf"),a("3b8d")),I={name:"Interactions",props:["contentObjectId","version","fieldId","base","selectedImage"],components:{preview:C},computed:{isCroppable:function(){return!!this.selectedImage.id&&"image"===this.selectedImage.type&&Object.keys(this.$root.$data.config.availableVariations).length>0}},methods:{handleCropClicked:function(){this.$root.$data.cropModalOpen=!0,this.$root.$options.methods.prepareDomForModal()},handleRemoveMediaClicked:function(){this.selectedImage={id:"",name:"",type:"image",url:"",alternateText:"",tags:[],size:0,variations:{},height:0,width:0},this.$refs.fileInput.value=null},fetchFolders:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(this.$root.$data.config.paths.folders);case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.$root.$data.folders=a;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleBrowseMediaClicked:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$root.$data.mediaModalOpen=!0,this.$root.$options.methods.prepareDomForModal(),this.fetchFolders();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getFileType:function(e){var t=e.type.split("/")[0];return"video"!==t&&"image"!==t?"other":t},handleFileInputChange:function(e){this.$root.$data.uploadModalOpen=!0,this.$root.$data.uploadModalLoading=!0,this.fetchFolders();var t=e.target.files.item(0);if(t)if(this.selectedImage={id:t.name,name:t.name,type:this.getFileType(t),url:"",alternateText:"",tags:[],size:t.size,variations:{},height:0,width:0},"image"===this.selectedImage.type){var a=new FileReader;a.addEventListener("load",function(){this.$refs.preview.$refs.image.onload=function(){this.selectedImage.width=this.$refs.preview.$refs.image.naturalWidth,this.selectedImage.height=this.$refs.preview.$refs.image.naturalHeight,this.$root.$data.uploadModalLoading=!1}.bind(this),this.selectedImage.url=a.result}.bind(this),!1),a.readAsDataURL(t)}else this.$root.$data.uploadModalLoading=!1}}},M=I,S=Object(y["a"])(M,w,$,!1,null,null,null),V=S.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{title:this.$root.$data.NgRemoteMediaTranslations.browse_title},on:{close:function(t){return e.$emit("close")}}},[a("media-facets",{attrs:{folders:e.folders,facets:e.facets},on:{change:e.handleFacetsChange}}),a("media-galery",{attrs:{media:e.media,canLoadMore:e.canLoadMore,selectedMediaId:e.selectedMediaId},on:{loadMore:e.handleLoadMore,"media-selected":function(t){return e.$emit("media-selected",t)}}}),e.loading?a("i",{staticClass:"ng-icon ng-spinner"}):e._e()],1)},k=[],x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mediaFacets"},[a("ul",{staticClass:"tabs"},[a("li",{class:{active:e.isType(e.TYPE_IMAGE)}},[a("span",{on:{click:function(t){return e.handleTypeChange(e.TYPE_IMAGE)}}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.browse_image_and_documents))])]),a("li",{class:{active:e.isType(e.TYPE_VIDEO)}},[a("span",{on:{click:function(t){return e.handleTypeChange(e.TYPE_VIDEO)}}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.browse_video))])])]),a("div",{staticClass:"body"},[a("div",{staticClass:"form-field"},[a("label",{attrs:{for:"folder"}},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.browse_select_folder))]),a("v-select",{attrs:{options:e.folders,label:"name",reduce:function(e){return e.id},placeholder:this.$root.$data.NgRemoteMediaTranslations.browse_all_folders},on:{input:e.handleFolderChange},model:{value:e.selectedFolder,callback:function(t){e.selectedFolder=t},expression:"selectedFolder"}})],1),a("div",{staticClass:"search-wrapper"},[a("span",{staticClass:"search-label"},[e._v(e._s(this.$root.$data.NgRemoteMediaTranslations.search))]),a("div",{staticClass:"search"},[a("ul",{staticClass:"searchType"}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"text",placeholder:this.$root.$data.NgRemoteMediaTranslations.search_by_name},domProps:{value:e.query},on:{keyup:e.handleQueryChange,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),null(t))},input:function(t){t.target.composing||(e.query=t.target.value)}}})]),a("div",{staticClass:"search"},[a("ul",{staticClass:"searchType"}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.tag,expression:"tag"}],attrs:{type:"text",placeholder:this.$root.$data.NgRemoteMediaTranslations.search_by_tag},domProps:{value:e.tag},on:{keyup:e.handleTagChange,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),null(t))},input:function(t){t.target.composing||(e.tag=t.target.value)}}})])])])])},T=[],P="image",E="video",F="name",R="tag",N="all",z={name:"MediaFacets",props:["folders","facets"],data:function(){return{TYPE_IMAGE:P,TYPE_VIDEO:E,SEARCH_NAME:F,SEARCH_TAG:R,FOLDER_ALL:N,selectedFolder:this.facets.folder,query:this.facets.query}},methods:{handleSearchChange:function(e){this.$emit("change",{searchType:e})},handleTypeChange:function(e){this.$emit("change",{mediaType:e})},isType:function(e){return this.facets.mediaType===e},handleFolderChange:function(e){this.$emit("change",{folder:this.selectedFolder})},handleQueryChange:function(){this.$emit("change",{query:this.query})},handleTagChange:function(){this.$emit("change",{tag:this.tag})}},components:{"v-select":g.a}},A=z,D=(a("89cc"),Object(y["a"])(A,x,T,!1,null,"43e8593a",null)),L=D.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mediaGalery"},[a("div",{staticClass:"items"},[e.media.length?e._e():a("div",{staticClass:"folder-empty"},[a("span",{staticClass:"icon-folder"}),e._m(0)]),e._l(e.media,(function(t){return a("div",{key:t.id,staticClass:"media",class:{selected:t.resourceId===e.selectedMediaId}},["image"===t.type||"video"===t.type?a("div",{staticClass:"media-container"},[a("img",{staticClass:"img",attrs:{src:t.browse_url,alt:t.filename}}),a("Label",{staticClass:"filename"},[e._v(e._s(t.filename))]),a("div",{staticClass:"size-description"},[e._v(e._s(t.width)+" x "+e._s(t.height))])],1):a("div",{staticClass:"media-container"},[e._m(1,!0),a("Label",{staticClass:"filename"},[e._v(e._s(t.filename))]),a("div",{staticClass:"size-description"},[e._v(e._s(t.width)+" x "+e._s(t.height))])],1),a("button",{staticClass:"btn btn-blue select-btn",attrs:{type:"button"},on:{click:function(a){return e.$emit("media-selected",t)}}},[e._v("Select")])])}))],2),e.canLoadMore?a("div",{staticClass:"load-more-wrapper"},[a("button",{staticClass:"btn btn-blue",attrs:{type:"button"},on:{click:function(t){return e.$emit("loadMore")}}},[e._v("Load more")])]):e._e()])},q=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("strong",[e._v("Folder is empty")]),e._v("Upload media from your local storage.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"video-placeholder"},[a("span",{staticClass:"icon-play"})])}],B={name:"MediaGalery",props:["media","canLoadMore","onLoadMore","selectedMediaId"]},U=B,G=(a("c0a0"),Object(y["a"])(U,Q,q,!1,null,"499fec0a",null)),W=G.exports,Y=a("b012"),H=a.n(Y),J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"overlay"},[a("div",{staticClass:"media-modal"},[a("div",{staticClass:"title"},[e._v("\n      "+e._s(e.title)+"\n      "),a("span",{staticClass:"close",on:{click:e.close}},[a("span",{staticClass:"icon-cancel"})])]),a("div",{staticClass:"body"},[e._t("default")],2)])])},K=[],X={name:"Modal",props:["title"],methods:{close:function(){this.$emit("close")}}},Z=X,ee=(a("d84e"),Object(y["a"])(Z,J,K,!1,null,"52710e69",null)),te=ee.exports;function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ie=25,re={name:"MediaModal",props:["folders","selectedMediaId","paths"],components:{"media-facets":L,"media-galery":W,modal:te},data:function(){return{media:[],canLoadMore:!1,nextCursor:null,loading:!0,facets:{folder:"",searchType:F,mediaType:P,query:"",tag:""}}},methods:{debouncedLoad:H()((function(e){this.load(e)}),500),load:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(){var t,a,n,i,r,s,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{patch:!1},a=t.patch,this.loading=!0,this.abortController&&this.abortController.abort(),this.abortController=new AbortController,n={limit:ie,offset:a?this.media.length:0,q:this.facets.query,mediatype:this.facets.mediaType,folder:this.facets.folder||N,search_type:this.facets.searchType,next_cursor:a?this.nextCursor:null,tag:this.facets.tag},i="".concat(this.paths.browse,"?").concat(c(n)),e.prev=6,e.next=9,fetch(i,{signal:this.abortController.signal});case 9:return r=e.sent,e.next=12,r.json();case 12:s=e.sent,this.media=a?this.media.concat(s.hits):s.hits,this.canLoadMore=s.load_more,this.nextCursor=s.next_cursor,this.loading=!1,e.next=23;break;case 19:if(e.prev=19,e.t0=e["catch"](6),20===e.t0.code){e.next=23;break}throw e.t0;case 23:case"end":return e.stop()}}),e,this,[[6,19]])})));function t(){return e.apply(this,arguments)}return t}(),handleLoadMore:function(){this.debouncedLoad({patch:!0})},handleFacetsChange:function(e){this.facets=ne({},this.facets,{},e),this.debouncedLoad()}},mounted:function(){this.load()}},se=re,oe=(a("d460"),Object(y["a"])(se,j,k,!1,null,"420b29ab",null)),le=oe.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{title:"Upload image"},on:{close:function(t){return e.$emit("close")}}},[e.loading?a("i",{staticClass:"ng-icon ng-spinner"}):a("div",[a("label",{attrs:{for:"folder"}},[e._v("Select Folder")]),a("select-folder",{attrs:{folders:e.folders},on:{change:e.handleFolderChange}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newName,expression:"newName"}],attrs:{type:"text"},domProps:{value:e.newName},on:{input:function(t){t.target.composing||(e.newName=t.target.value)}}}),a("button",{attrs:{disabled:""===e.newName,type:"button"},on:{click:e.handleSaveClick}},[e._v("Save")])],1)])},de=[],ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-field"},[a("v-select",{attrs:{options:e.foldersWithNew,label:"name",reduce:function(e){return e.id},placeholder:"/"},on:{input:e.handleFolderChanged},scopedSlots:e._u([{key:"search",fn:function(t){return["checkbox"===t.attributes.type?a("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.folderSearchQuery,expression:"folderSearchQuery"}],staticClass:"vs__search",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.folderSearchQuery)?e._i(e.folderSearchQuery,null)>-1:e.folderSearchQuery},on:{change:function(t){var a=e.folderSearchQuery,n=t.target,i=!!n.checked;if(Array.isArray(a)){var r=null,s=e._i(a,r);n.checked?s<0&&(e.folderSearchQuery=a.concat([r])):s>-1&&(e.folderSearchQuery=a.slice(0,s).concat(a.slice(s+1)))}else e.folderSearchQuery=i}}},"input",t.attributes,!1),t.events)):"radio"===t.attributes.type?a("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.folderSearchQuery,expression:"folderSearchQuery"}],staticClass:"vs__search",attrs:{type:"radio"},domProps:{checked:e._q(e.folderSearchQuery,null)},on:{change:function(t){e.folderSearchQuery=null}}},"input",t.attributes,!1),t.events)):a("input",e._g(e._b({directives:[{name:"model",rawName:"v-model",value:e.folderSearchQuery,expression:"folderSearchQuery"}],staticClass:"vs__search",attrs:{type:t.attributes.type},domProps:{value:e.folderSearchQuery},on:{input:function(t){t.target.composing||(e.folderSearchQuery=t.target.value)}}},"input",t.attributes,!1),t.events))]}},{key:"option",fn:function(t){return[t.new?a("div",[e._v("\n        "+e._s(t.name)+"\n        "),a("button",{attrs:{type:"button"}},[e._v("Create new")])]):t.added?a("div",[e._v(e._s(t.name)+" (new)")]):a("div",[e._v(e._s(t.name))])]}}]),model:{value:e.folder,callback:function(t){e.folder=t},expression:"folder"}})],1)},pe=[],he=(a("7514"),{name:"SelectFolder",props:["folders","selectedFolder"],data:function(){return{folderSearchQuery:"",addedFolders:[],folder:this.selectedFolder}},computed:{foldersWithNew:function(){var e=this,t=[].concat(Object(o["a"])(this.folders),Object(o["a"])(this.addedFolders));return 0===this.folderSearchQuery.length?t:t.find((function(t){return t.name===e.folderSearchQuery}))?t:[{name:this.folderSearchQuery,id:this.folderSearchQuery,new:!0}].concat(Object(o["a"])(t))}},methods:{handleFolderChanged:function(e){this.folderSearchQuery="";var t=[].concat(Object(o["a"])(this.folders),Object(o["a"])(this.addedFolders));t.find((function(t){return t.name===e}))||this.addedFolders.push({id:e,name:e,added:!0}),this.$emit("change",this.folder)}},components:{"v-select":g.a}}),me=he,fe=(a("e624"),Object(y["a"])(me,ue,pe,!1,null,"e0caddfc",null)),ge=fe.exports,ve={name:"UploadModal",props:["folders","loading","name"],data:function(){return{selectedFolder:"",newName:this.name}},components:{"select-folder":ge,modal:te},methods:{handleFolderChange:function(e){this.selectedFolder=e},handleSaveClick:function(){var e=this.newName;this.selectedFolder&&(e="".concat(this.selectedFolder,"/").concat(this.newName)),this.$emit("save",e)}}},be=ve,ye=Object(y["a"])(be,ce,de,!1,null,"39c1a599",null),_e=ye.exports,Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{title:"Crop"},on:{close:function(t){return e.$emit("close")}}},[a("crop-sizes",{attrs:{availableVariations:e.availableVariations,allVariationValues:e.allVariationValues,imageSize:e.imageSize,selectedVariation:e.selectedVariation},on:{selected:e.handleVariationSelected,addedVariations:e.handleAddedVariations,removedVariation:e.handleRemovedVariation}}),e._l(e.availableVariations,(function(t,n){return a("div",{key:n,staticClass:"crop-container"},[n===e.selectedVariation?a("crop",{attrs:{value:e.allVariationValues[n],src:e.selectedImage.url,variation:e.availableVariations[n],imageSize:e.imageSize},on:{change:function(t){return e.handleVariationValueChange(n,t)}}}):e._e()],1)})),e.selectedVariation?e._e():a("div",{staticClass:"img-placeholder"},[a("img",{attrs:{src:e.selectedImage.url}})]),a("div",{staticClass:"action-strip"},[a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.handleCancelClicked}},[e._v("Cancel")]),a("button",{staticClass:"btn btn-blue",attrs:{type:"button"},on:{click:e.handleSaveClicked}},[a("span",{staticClass:"icon-floppy"}),a("span",[e._v("Save sizes")])])])],2)},we=[],$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar-crop"},[a("div",{staticClass:"buttons"},[e.addingVariations?e._e():a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.handleAddCropSize}},[e._v("Add crop size")]),e.addingVariations?a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:e.handleCancel}},[e._v("Cancel")]):e._e(),e.addingVariations?a("button",{staticClass:"btn crop-btn-add",attrs:{type:"button"},on:{click:e.handleAdd}},[e._v("Add")]):e._e()]),e._m(0),a("div",{directives:[{name:"show",rawName:"v-show",value:e.addingVariations,expression:"addingVariations"}],class:{unselectedVariations:e.addingVariations}},e._l(e.unselectedVariations,(function(t){return a("div",{key:t,class:{disabled:!e.isVariationSelectable(t)}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newSelection,expression:"newSelection"}],attrs:{type:"checkbox",id:t,disabled:!e.isVariationSelectable(t)},domProps:{value:t,checked:Array.isArray(e.newSelection)?e._i(e.newSelection,t)>-1:e.newSelection},on:{change:function(a){var n=e.newSelection,i=a.target,r=!!i.checked;if(Array.isArray(n)){var s=t,o=e._i(n,s);i.checked?o<0&&(e.newSelection=n.concat([s])):o>-1&&(e.newSelection=n.slice(0,o).concat(n.slice(o+1)))}else e.newSelection=r}}}),a("label",{attrs:{for:t}},[a("span",{staticClass:"name"},[e._v(e._s(t))]),a("span",{staticClass:"formatted-size"},[e._v(e._s(e.formattedSize(t)))])]),e.isVariationSelectable(t)?e._e():a("div",{staticClass:"legend-not-selectable"},[a("span",[e._v("Media is too small.")])])])})),0),a("div",{staticClass:"selectedVariations"},[a("ul",e._l(e.selectedVariations,(function(t){return a("li",{key:t,class:{set:!!e.allVariationValues[t],selected:e.selectedVariation===t,disabled:!e.isVariationSelectable(t)},on:{click:function(a){return e.handleVariationClicked(t)}}},[a("div",[a("span",{staticClass:"name"},[e._v(e._s(t))]),a("span",{staticClass:"formatted-size"},[e._v(e._s(e.formattedSize(t)))])]),e.addingVariations?e._e():a("a",{attrs:{href:"#"}},[a("span",{staticClass:"circle-orange"}),a("span",{staticClass:"icon-trash",on:{click:function(a){return e.removeItem(t)}}})])])})),0)])])},Oe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sidebar-crop-label"},[a("span",[e._v("Addded for Confirmation")])])}],Ie=a("768b"),Me={name:"CropSizes",props:["availableVariations","allVariationValues","imageSize","selectedVariation"],data:function(){return{newSelection:[],addingVariations:!1}},computed:{unselectedVariations:function(){var e=Object.keys(this.availableVariations),t=Object.keys(this.allVariationValues);return e.difference(t)},selectedVariations:function(){return Object.getOwnPropertyNames(this.allVariationValues)}},methods:{handleAddCropSize:function(){this.addingVariations=!0},handleCancel:function(){this.addingVariations=!1,this.newSelection=[]},handleAdd:function(){this.$emit("addedVariations",this.newSelection),this.newSelection=[],this.addingVariations=!1},removeItem:function(e){this.$emit("removedVariation",e)},formattedSize:function(e){return"".concat(this.availableVariations[e][0]," x ").concat(this.availableVariations[e][1])},isVariationSelectable:function(e){var t=Object(Ie["a"])(this.availableVariations[e],2),a=t[0],n=t[1];return this.imageSize.width>=a&&this.imageSize.height>=n},handleVariationClicked:function(e){this.isVariationSelectable(e)&&this.$emit("selected",e)}}},Se=Me,Ve=(a("1f12"),Object(y["a"])(Se,$e,Oe,!1,null,"55a3bdf8",null)),je=Ve.exports,ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crop"},[a("div",{ref:"cropper",staticClass:"cropper",style:e.cropperStyle},[a("img",{ref:"image",attrs:{src:e.src}}),a("div",{ref:"buttons",staticClass:"buttons",style:e.applyButtonStyle},[a("button",{staticClass:"btn btn-blue",attrs:{type:"button"},on:{click:e.handleReset}},[a("span",{staticClass:"icon-ccw"}),a("span",[e._v("Reset")])]),a("button",{staticClass:"btn btn-blue",attrs:{type:"button"},on:{click:e.handleApply}},[a("span",{staticClass:"icon-ok"}),a("span",[e._v("Apply")])])])]),a("div",[a("h4",[e._v("Preview")]),a("div",{ref:"preview",staticClass:"preview"})])])},xe=[],Te=a("5435"),Pe={name:"Crop",props:["value","variation","src","imageSize"],mounted:function(){this.setCropper()},beforeDestroy:function(){this.destroyCropper()},data:function(){return{crop:{},cropper:null}},methods:{setCropper:function(){var e,t=this.value||{},a=t.x,i=t.y,r=t.w,s=t.h,o={x:a,y:i,width:r,height:s},l=Object(Ie["a"])(this.variation,2),c=l[0],d=l[1],u=c>0&&d>0?c/d:void 0;this.destroyCropper();this.$refs.cropper.clientWidth,this.imageSize.width;this.cropper=new Te["a"](this.$refs.image,(e={viewMode:2,dragMode:"none",autoCrop:!0,data:o,aspectRatio:u,guides:!0,movable:!1,rotatable:!1},Object(n["a"])(e,"guides",!1),Object(n["a"])(e,"center",!1),Object(n["a"])(e,"zoomable",!1),Object(n["a"])(e,"scalable",!0),Object(n["a"])(e,"minCropBoxWidth",50),Object(n["a"])(e,"minCropBoxHeight",50),Object(n["a"])(e,"crop",this.handleCrop),Object(n["a"])(e,"preview",this.$refs.preview),e)),this.cropper.setData(o)},handleCrop:function(e){this.crop=this.cropper.getData(!0)},destroyCropper:function(){this.cropper&&this.cropper.destroy()},handleReset:function(){this.cropper.reset()},handleApply:function(){var e=this.cropper.getData(!0),t=e.x,a=e.y,n=e.width,i=e.height;this.$emit("change",{x:t,y:a,w:n,h:i})}},computed:{applyButtonStyle:function(){var e=this.crop,t=e.x,a=e.y,n=e.width,i=e.height,r=this.$refs.buttons?this.$refs.buttons.clientWidth:0,s=this.$refs.cropper?this.$refs.cropper.clientWidth/this.imageSize.width:1;return{top:"".concat((a+i)*s+10,"px"),left:"".concat((t+n)*s-r-1,"px")}},cropperStyle:function(){var e=this.imageSize.height/this.imageSize.width*100;return{"padding-bottom":"".concat(e,"%"),height:"0px",width:"100%"}}}},Ee=Pe,Fe=(a("d21c"),Object(y["a"])(Ee,ke,xe,!1,null,"b4d83f7e",null)),Re=Fe.exports,Ne=function(e){return function(t){return Object.keys(t).reduce((function(a,n){return e(t[n],n)&&(a[n]=t[n]),a}),{})}},ze=function(e){return function(t){return!e(t)}},Ae=function(e){return function(t){return e===t}},De=function(e){return!!e},Le=ze(Ae(void 0));function Qe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function qe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qe(a,!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Be={name:"CropModal",props:["availableVariations","selectedImage"],components:{modal:te,"crop-sizes":je,crop:Re},data:function(){return{selectedVariation:null,newVariationValues:{}}},computed:{allVariationValues:function(){return Ne(Le)(qe({},this.selectedImage.variations,{},this.newVariationValues))},imageSize:function(){return{height:this.selectedImage.height,width:this.selectedImage.width}}},methods:{handleVariationSelected:function(e){this.selectedVariation=e},handleAddedVariations:function(e){this.newVariationValues=qe({},this.newVariationValues,{},e.reduce((function(e,t){return e[t]=null,e}),{}))},handleRemovedVariation:function(e){this.newVariationValues=qe({},this.newVariationValues,Object(n["a"])({},e,void 0))},handleVariationValueChange:function(e,t){this.newVariationValues=qe({},this.newVariationValues,Object(n["a"])({},e,t))},handleCancelClicked:function(){this.newVariationValues={},this.$emit("close")},handleSaveClicked:function(){this.$emit("change",qe({},this.newVariationValues)),this.newVariationValues={},this.$emit("close")}}},Ue=Be,Ge=(a("e6ba"),Object(y["a"])(Ue,Ce,we,!1,null,"6540a3a8",null)),We=Ge.exports,Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{title:"Insert remote media"},on:{close:function(t){return e.$emit("close")}}},[e.loading?a("i",{staticClass:"ng-icon ng-spinner"}):a("div",[a("div",{staticClass:"ngremotemedia-buttons",attrs:{id:"ngremotemedia-buttons-"+e.fieldId,"data-id":e.fieldId,"data-contentobject-id":e.contentObjectId,"data-version":e.contentVersion}},[a("input",{directives:[{name:"model",rawName:"v-model",value:this.$parent.$selectedImage.id,expression:"this.$parent.$selectedImage.id"}],staticClass:"media-id",attrs:{type:"hidden",name:e.base+"_media_id_"+e.fieldId},domProps:{value:this.$parent.$selectedImage.id},on:{input:function(t){t.target.composing||e.$set(this.$parent.$selectedImage,"id",t.target.value)}}}),this.$parent.$isCroppable?a("input",{staticClass:"ngremotemedia-scale hid button",attrs:{type:"button",value:"Scale"},on:{click:function(e){return this.$parent.handleCropClicked()}}}):e._e(),this.$parent.$selectedImage.id?a("input",{staticClass:"ngremotemedia-remove-file button",attrs:{type:"button",value:"Remove media"},on:{click:function(e){return this.$parent.handleRemoveMediaClicked()}}}):e._e(),a("input",{staticClass:"ngremotemedia-remote-file button",attrs:{type:"button",value:"Manage media"},on:{click:function(e){return this.$parent.handleBrowseMediaClicked()}}}),a("div",{staticClass:"ngremotemedia-local-file-container"},[a("button",{staticClass:"btn btn-default ngremotemedia-local-file button upload-from-disk",attrs:{type:"button"}},[a("Label",{attrs:{for:"new_file"}},[e._v("\n            Quick upload\n          ")]),a("input",{ref:"fileInput",attrs:{hidden:"",id:"new_file",name:e.base+"_new_file_"+e.fieldId,type:"file"},on:{change:function(e){return this.$parent.handleFileInputChange()}}})],1)])]),a("input",{staticClass:"media-id",attrs:{type:"hidden",name:e.base+"_image_variations_"+e.fieldId}}),this.$parent.$cropModalOpen?a("crop-modal",{attrs:{"selected-image":this.$parent.$selectedImage,"available-variations":this.$parent.$config.availableVariations,"data-user-id":e.userId},on:{change:function(e){return this.$parent.handleVariationCropChange()},close:function(e){return this.$parent.handleCropModalClose()}}}):e._e(),this.$parent.$mediaModalOpen?a("media-modal",{attrs:{folders:this.$parent.$folders,"selected-media-id":this.$parent.$selectedImage.id,paths:this.$parent.$config.paths},on:{close:function(e){return this.$parent.handleMediaModalClose()},"media-selected":function(e){return this.$parent.handleMediaSelected()}}}):e._e(),this.$parent.$uploadModalOpen?a("upload-modal",{attrs:{folders:this.$parent.$folders,loading:this.$parent.$uploadModalLoading,name:this.$parent.$selectedImage.name},on:{close:function(e){return this.$parent.handleUploadModalClose()},save:function(e){return this.$parent.handleUploadModalSave()}}}):e._e()],1)])},He=[],Je={name:"EditorInsertModal",props:["loading","base","fieldId","userId","contentObjectId","contentVersion"],data:function(){return{}},components:{modal:te,"crop-modal":We,"media-modal":le,"upload-modal":_e},methods:{}},Ke=Je,Xe=Object(y["a"])(Ke,Ye,He,!1,null,"acb9fb10",null),Ze=Xe.exports,et={bind:function(e,t,a){var n=u(t.arg);a.context[n]=t.value}};a("b39d");function tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function at(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tt(a,!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tt(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}i["a"].config.productionTip=!1;var nt=function(){document.querySelectorAll(".ngremotemedia-type").forEach((function(e,t){window["remoteMedia".concat(t)]=new i["a"]({el:e,directives:{init:et},data:{NgRemoteMediaTranslations:NgRemoteMediaTranslations,RemoteMediaSelectedImage:window["RemoteMediaSelectedImage_".concat(e.dataset.id)],RemoteMediaConfig:RemoteMediaConfig,folders:[],mediaModalOpen:!1,cropModalOpen:!1,uploadModalOpen:!1,uploadModalLoading:!1,editorInsertModalOpen:!1,selectedImage:{id:"",name:"",type:"image",url:"",browse_url:"",alternateText:"",tags:[],size:"",variations:{},height:0,width:0},config:{paths:{},availableVariations:{}}},computed:{stringifiedVariations:function(){return JSON.stringify(Ne(De)(this.selectedImage.variations))}},components:{preview:C,interactions:V,"media-modal":le,"v-select":g.a,"crop-modal":We,"upload-modal":_e,"editor-insert-modal":Ze},methods:{prepareDomForModal:function(){var e=document.querySelector(".ez-page-builder-wrapper");e&&(e.style.transform="none")},resetDomAfterModal:function(){var e=document.querySelector(".ez-page-builder-wrapper");e&&e.removeAttribute("style")},handleEditorInsertClicked:function(){this.editorInsertModalOpen=!0},handleMediaModalClose:function(){this.mediaModalOpen=!1,this.resetDomAfterModal()},handleCropModalClose:function(){this.cropModalOpen=!1,this.resetDomAfterModal()},handleUploadModalClose:function(){this.uploadModalOpen=!1},handleEditorInsertModalClose:function(){this.editorInsertModalOpen=!1},handleMediaSelected:function(e){this.selectedImage={id:e.resourceId,name:e.filename,type:e.type,url:e.url,alternateText:"",tags:e.tags,size:e.filesize,variations:{},height:e.height,width:e.width},this.mediaModalOpen=!1},handleVariationCropChange:function(e){this.selectedImage=at({},this.selectedImage,{variations:at({},this.selectedImage.variations,{},e)})},handleUploadModalSave:function(e){this.selectedImage=at({},this.selectedImage,{name:e,id:e}),this.uploadModalOpen=!1},handleEditorInsertModalSave:function(){alert("test"),this.editorInsertModalOpen=!1}}})}))};"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?nt():document.addEventListener("DOMContentLoaded",nt)},"84d8":function(e,t,a){},"89cc":function(e,t,a){"use strict";var n=a("ef9e"),i=a.n(n);i.a},"8a3f":function(e,t,a){},ad0a:function(e,t,a){},b39d:function(e,t){Array.prototype.difference||(Array.prototype.difference=function(e){return this.filter((function(t){return e.indexOf(t)<0}))})},c0a0:function(e,t,a){"use strict";var n=a("e941"),i=a.n(n);i.a},d21c:function(e,t,a){"use strict";var n=a("1be4"),i=a.n(n);i.a},d460:function(e,t,a){"use strict";var n=a("48a2"),i=a.n(n);i.a},d84e:function(e,t,a){"use strict";var n=a("ad0a"),i=a.n(n);i.a},e624:function(e,t,a){"use strict";var n=a("84d8"),i=a.n(n);i.a},e6ba:function(e,t,a){"use strict";var n=a("8a3f"),i=a.n(n);i.a},e941:function(e,t,a){},ef9e:function(e,t,a){}});
//# sourceMappingURL=app.js.map